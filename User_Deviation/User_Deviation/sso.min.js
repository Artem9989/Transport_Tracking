!function(window,document,navigator){"use strict";var singleton,Fn,sdkNamespace;Fn=function(options){var clientId,version,host,node,noFB,frameReference,frameReferenceContainer,windowReference,type,signInScreenConfig,signInTemplate,require2fa,mfaClientIdArray,mfaEmailAddr,prefillEmailAddr,callback,onlySignUp,noSignUp,theme,realm,realmInput,noCloseFrameButton,inviteToken,selfCertifyAge,uatDuration,phoneNumberField,companyEmailInSignUp,channel,realmAny,isIOS=!!(options.navigator&&options.navigator.userAgent&&options.navigator.userAgent.match(/(iPad|iPhone|iPod)/g));function localhostCookies(event){if(window.location.href.match(/^http:\/\/localhost/))if(event.data.flow!==sdkNamespace.flows.SIGN_IN||event.data.action!==sdkNamespace.actions.COMPLETED&&event.data.action!==sdkNamespace.actions.ALREADY_SIGNED_IN){if(event.data.flow===sdkNamespace.flows.SIGN_OUT&&event.data.action===sdkNamespace.actions.COMPLETED){var hereAccountSDKCookie=document.cookie.replace(/(?:(?:^|.*;\s*)hereAccountSDK\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(hereAccountSDKCookie){var expireDate="Thu, 01 Jan 1970 00:00:00 GMT",hereAccountSDKCookieContent=JSON.parse(hereAccountSDKCookie);document.cookie=hereAccountSDKCookieContent.auth+"=;expires="+expireDate+";path=/",document.cookie=hereAccountSDKCookieContent.access+"=;expires="+expireDate+";path=/",document.cookie="hereAccountSDK=;expires="+expireDate+";path=/"}}}else{var eventData=event.data.data,today=new Date,expirationDate=new Date(today.setDate(today.getDate()+2));document.cookie="hereAccountSDK="+JSON.stringify({auth:eventData.authCookieName,access:eventData.accessCookieName})+";expires="+expirationDate+";path=/",document.cookie=eventData.authCookieName+"="+encodeURIComponent(eventData.authCookie)+";expires="+expirationDate+";path=/",document.cookie=eventData.accessCookieName+"="+encodeURIComponent(eventData.accessToken)+";expires="+expirationDate+";path=/"}}function destroyFrame(){isIOS&&frameReferenceContainer.removeChild(frameReference),node.removeChild(frameReferenceContainer),frameReferenceContainer=frameReference=null}function processMessage(event){if(localhostCookies(event),event.data.action===sdkNamespace.actions.COMPLETED||event.data.action===sdkNamespace.actions.ABORTED||event.data.action===sdkNamespace.actions.REFRESH_FAILED||event.data.action===sdkNamespace.actions.ALREADY_SIGNED_IN)if(type===sdkNamespace.types.FRAME&&frameReference)document.activeElement.blur(),destroyFrame();else{if(type!==sdkNamespace.types.WINDOW)return callback("Unsupported type: "+type);document.activeElement.blur(),windowReference.close()}callback(null,event.data)}function getPageUri(flow,trackId){return host+flow+(uri=window.location.href.match(/^((.*\:\/\/)?(?:(?![\/?#]).)*)/)[0],query="?client-id="+clientId+"&version="+version+"&sdk=true&type="+type+"&uri="+encodeURIComponent(uri),signInTemplate&&(query+="&sign-in-template="+signInTemplate),noFB&&(!version||version<2)&&(query+="&noFB=true"),2<=version&&signInScreenConfig&&(query+="&sign-in-screen-config="+signInScreenConfig),3<=version&&(mfaClientIdArray&&(query+="&mfa-client-id-array="+mfaClientIdArray.toString()),mfaEmailAddr&&(query+="&mfa-email-addr="+mfaEmailAddr),onlySignUp&&(query+="&only-sign-up=true"),noSignUp&&(query+="&no-sign-up=true"),prefillEmailAddr&&0<prefillEmailAddr.length&&"undefined"!==prefillEmailAddr&&(query+="&prefill-email-addr="+prefillEmailAddr)),4<=version&&(theme&&(query+="&theme="+theme),realm&&(query+="&realm="+realm),realmInput&&(query+="&realm-input=true"),noCloseFrameButton&&(query+="&frame-no-close=true"),inviteToken&&(query+="&invite-token="+inviteToken),selfCertifyAge&&(query+="&self-certify-age=true"),uatDuration&&(query+="&uat-duration="+uatDuration),phoneNumberField&&(query+="&phone-number-field="+phoneNumberField),companyEmailInSignUp&&(query+="&company-email-in-signup="+companyEmailInSignUp),realmAny&&(query+="&realm-any="+realmAny),require2fa&&(query+="&require2fa="+require2fa),channel&&(query+="&channel="+channel)),query)+(trackId?"&track-id="+trackId:"")+(options.lang?"&lang="+options.lang:"");var uri,query}function getFrame(pageUri){var frameRefObject=function(pageUri){var frameContainer,frameWrapper,frame=document.createElement("iframe");return frame.id="here-account-sdk",frameContainer=isIOS?(frameWrapper=document.createElement("div"),"harmony-single"!==signInTemplate&&"clm"!==signInTemplate&&(frameWrapper.style.overflowY="auto",frameWrapper.style.overflowX="hidden"),frameWrapper.style.webkitOverflowScrolling="touch",frameWrapper.id="here-account-sdk-frame-wrapper",node.appendChild(frameWrapper),frame.style.width="100%",frame.style.height="100%",frame.style.border="0",frameWrapper.appendChild(frame),frameWrapper):(node.appendChild(frame),frame),("single-column"!==signInTemplate&&"harmony-single"!==signInTemplate&&"clm"!==signInTemplate||version<2)&&(frameContainer.style.position="fixed"),frameContainer.style.border="0",frameContainer.style.margin="0",frameContainer.style.padding="0",frameContainer.style.zIndex="999999",frameContainer.style.width="100%",frameContainer.style.height="100%",frameContainer.style.top="0",frameContainer.style.bottom="0",frameContainer.style.left="0",frameContainer.style.right="0",frameContainer.style.display="none",frame.setAttribute("src",pageUri),frame.onload=function(){frame&&frame.style&&(frameContainer.style.display="block")},{frame:frame,frameContainer:frameContainer}}(pageUri);frameReference=frameRefObject.frame,frameReferenceContainer=frameRefObject.frameContainer}function getPage(flow,trackId){callback(null,{flow:flow,action:sdkNamespace.actions.OPENING});var pageUri=getPageUri(flow,trackId);if(window.addEventListener?window.addEventListener("message",processMessage,!1):window.attachEvent&&window.attachEvent("message",processMessage),type===sdkNamespace.types.WINDOW)return function(pageUri){windowReference=window.open(pageUri,"account-sdk")}(pageUri);getFrame(pageUri)}function setType(newType){if(newType!==sdkNamespace.types.FRAME&&newType!==sdkNamespace.types.WINDOW)throw"unknown type delivered";type=newType}return function(options){if(!options.clientId)throw"clientId required";void 0!==options.type?setType(options.type):setType(sdkNamespace.types.FRAME),node=options.node||document.body,version=options.version||"0.1",clientId=options.clientId,channel=options.channel,callback=options.callback||function(){},noFB=options.noFB||!1,signInScreenConfig=options.signInScreenConfig||"",signInTemplate=options.signInTemplate||"",require2fa=options.require2fa||!1,void 0!==options.mfaRequired&&(mfaClientIdArray=options.mfaRequired.clientIdsMfaRq?options.mfaRequired.clientIdsMfaRq:null,mfaEmailAddr=options.mfaRequired.emailAddr?encodeURIComponent(options.mfaRequired.emailAddr):null),onlySignUp=options.onlySignUp||!1,noSignUp=options.noSignUp||!1,prefillEmailAddr=encodeURIComponent(options.prefillEmailAddr),theme=options.theme?options.theme:"",realm=options.realm?options.realm:"",realmInput=options.realmInput||!1,noCloseFrameButton=options.noCloseFrameButton||!1,inviteToken=options.inviteToken?options.inviteToken:"",selfCertifyAge=options.selfCertifyAge||!1,uatDuration=options.uatDuration?options.uatDuration:"",phoneNumberField=options.phoneNumberField||!1,companyEmailInSignUp=options.companyEmailInSignUp||!1,realmAny=options.realmAny||!1,host=function(options){var host;return options.environment?"/"!==(host=options.environment).substr(host.length-1)&&(host+="/"):host="https://account.here.com/",host}(options)}(options),{sdkVersion:function(){callback(null,{flow:sdkNamespace.flows.SDKVERSION,action:sdkNamespace.actions.COMPLETED,data:{version:"4.9.0"}})},setType:setType,openSignIn:function(trackId){getPage("sign-in",trackId)},openSignUp:function(trackId){noSignUp?callback(null,{flow:sdkNamespace.flows.SIGN_UP,action:sdkNamespace.actions.ABORTED}):getPage("sign-up",trackId)},openResetPassword:function(trackId){return getPage("reset-password",trackId)},openForgotOrgId:function(trackId){return getPage("forgot-org-id",trackId)},openResendInvite:function(trackId){return getPage("resend-invite",trackId)},openEmailVerificationRequest:function(trackId){return getPage("email-verify",trackId)},openSsxEc:function(trackId){return getPage("ssx-ec",trackId)},signOut:function(trackId){var oReq=new XMLHttpRequest;oReq.onload=function(){401===oReq.status||204===oReq.status?(localhostCookies({data:{flow:sdkNamespace.flows.SIGN_OUT,action:sdkNamespace.actions.COMPLETED}}),callback(null,{flow:sdkNamespace.flows.SIGN_OUT,action:sdkNamespace.actions.COMPLETED})):callback(sdkNamespace.errors.INVALID_RESPONSE,{flow:sdkNamespace.flows.SIGN_OUT})},oReq.onerror=function(){localhostCookies({data:{flow:sdkNamespace.flows.SIGN_OUT,action:sdkNamespace.actions.COMPLETED}}),callback(null,{flow:sdkNamespace.flows.SIGN_OUT,action:sdkNamespace.actions.COMPLETED})},oReq.open("get",getPageUri("api/account/sign-out",trackId),!0),oReq.withCredentials=!0,oReq.send()},passiveAuth:function(trackId){!function(trackId,cb){var oReq=new XMLHttpRequest;oReq.onload=function(){401===oReq.status?cb(null,{flow:sdkNamespace.flows.SIGN_IN,action:sdkNamespace.actions.ABORTED}):200===oReq.status?cb(null,{flow:sdkNamespace.flows.SIGN_IN,action:sdkNamespace.actions.COMPLETED,data:JSON.parse(oReq.responseText)}):cb(sdkNamespace.errors.INVALID_RESPONSE,{flow:sdkNamespace.flows.SIGN_IN})},oReq.onerror=function(){cb(null,{flow:sdkNamespace.flows.SIGN_IN,action:sdkNamespace.actions.ABORTED})},oReq.open("get",getPageUri("api/account",trackId),!0),oReq.withCredentials=!0,oReq.send()}(trackId,function(err,data){callback(err,data)})},getMfaRequiredClients:function(trackId){!function(trackId,cb){var oReq=new XMLHttpRequest;oReq.onload=function(){400===oReq.status||401===oReq.status||404===oReq.status?cb(null,{flow:sdkNamespace.flows.GET_DATA,action:sdkNamespace.actions.ABORTED}):200===oReq.status?cb(null,{flow:sdkNamespace.flows.GET_DATA,action:sdkNamespace.actions.COMPLETED,data:JSON.parse(oReq.responseText)}):cb(sdkNamespace.errors.INVALID_RESPONSE,{flow:sdkNamespace.flows.GET_DATA})},oReq.onerror=function(){cb(null,{flow:sdkNamespace.flows.GET_DATA,action:sdkNamespace.actions.ABORTED})},oReq.open("get",getPageUri("api/account/get-mfa-required-clients",trackId),!0),oReq.withCredentials=!0,oReq.send()}(trackId,function(err,data){callback(err,data)})},destruct:function(){document.activeElement.blur(),window.removeEventListener?window.removeEventListener("message",processMessage,!1):window.detachEvent&&window.detachEvent("message",processMessage),frameReference&&destroyFrame(),windowReference=windowReference&&null,singleton=singleton&&null}}},window.here=window.here||{},window.here.Account=function(options){return options.navigator=options.navigator||navigator,singleton=singleton||new Fn(options)},(sdkNamespace=window.here.Account).types={FRAME:"frame",WINDOW:"window"},sdkNamespace.actions={OPENING:"opening",OPENED:"opened",ABORTED:"aborted",COMPLETED:"completed",ALREADY_SIGNED_IN:"already signed in",REFRESH_FAILED:"refresh failed",ERROR:"error",FRAME_RESIZED:"frame resized"},sdkNamespace.flows={SDKVERSION:"sdk-version",SIGN_IN:"sign-in",SIGN_UP:"sign-up",SIGN_OUT:"sign-out",RESET_PASSWORD:"reset-password",FORGOT_ORG_ID:"forgot-org-id",RESEND_INVITE:"resend-invite",GET_DATA:"get-data",SIGN_IN_WITH_SET_MFA:"sign-in-with-set-mfa",SIGN_UP_WITH_SET_MFA:"sign-up-with-set-mfa",EMAIL_VERIFY:"email-verify",SSX_EC:"ssx-ec"},sdkNamespace.errors={INVALID_RESPONSE:"Invalid response"}}(window,document,navigator);