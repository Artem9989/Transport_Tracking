
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.24.1/HERE_NOTICE
 */

H.util.eval("function bo(a,b){if(!a)throw new D(bo,0,a);bo.l.constructor.call(this,a);this.b={};this.c=b&&b.vc;this.f=co++}u(bo,km);var co=0;\nbo.prototype.T=function(a,b,c,d,e,f){var g=xd(d),h=this.gb,k=g+(c.exp-h.pixelProjection.exp),l=h.min,m=h.max;d=h.tileSize;var p=h.na().i,q=this.wb,r=q.ed();var v=q.Bb().w;var w=c.w,z=c.x,J=c.y,G={};if(g<l||g>m)return jk.DONE;e=h.requestTiles(a,k,e,f,this.f);a=e.total;e=e.tiles;f=e.length;this.g=c;this.j=b;this.a=k;r!==p&&q.oc(p);c=d=d*w/(Dd(2,k)*d);this.c||(d%1&&(d=yd(d),w=c/d,z/=w,J/=w,w=Dd(2,k)*d),z=yd(z),J=yd(J));this.i=c;k=-d;g=v+d;for(h=0;h<f;h++){v=e[h];if((l=v.data)&&l.tagName){c=b.x-(z-v.x*\nd);p=b.y-(J-v.y*d);q.$c(l,c,p,d,d);for(r=c;(r-=w)>k;)q.$c(l,r,p,d,d);for(r=c;(r+=w)<g;)q.$c(l,r,p,d,d)}G[this.a+\"_\"+v.x+\"_\"+v.y]=v}this.b=G;return f===a?jk.DONE:jk.PENDING};bo.prototype.Ga=function(a,b,c){var d=this.i,e=d/this.gb.tileSize,f=this.g,g=this.j,h;if(tc(this.a)&&f){a=f.x+(a-g.x);b=f.y+(b-g.y);var k=yd(f.w/d);var l=f=yd(a/d);g=yd(b/d);Ad(l)>=k&&(l%=k);0>l&&(l=k+l);(k=this.b[this.a+\"_\"+l+\"_\"+g])&&k.Ga&&(h=k.Ga((a-d*f)/e,(b-d*g)/e,c))}return h||ff};bo.prototype.ce=function(){return\"2d\"};function eo(a,b){b=b||{};C(a,ml,eo,0);eo.l.constructor.call(this,a);this.vc=!!b.vc;this.c=b.hb||0;this.a=[];this.b={}}u(eo,km);\neo.prototype.T=function(a,b,c,d,e,f){var g,h=this.gb,k;d-=this.c;this.a.length=0;var l=this.b;this.b=g={};if(d>=h.min&&d<=h.max){var m=h.Dd(a,d,e,f);var p=m.overlays;if(a=p.length)for(p.sort(Rg),d=this.wb,e=this.vc,f=0;f<a;f++){h=p[f];var q=h.J();var r=c.jb(q.Pb());var v=c.jb(q.Mb());q=c.w;r.x>=v.x&&(r.x-=q);q=-((r.x+v.x)/q>>1)*q;r.x+=q;r.add(b);v.x+=q;v.add(b);e||(r.round(),v.round());(q=l[k=h.fb()])?delete l[k]:q={Go:h};g[k]=q;var w=r.x;r=r.y;var z=v.x;v=v.y;var J=z-w;var G=v-r;d.oc(h.ed());d.$c(h.bd(),\nw,r,J,G);q.oh?q.oh.set(w,r,z,v):q.oh=new lk(w,r,z,v);this.a.push(q)}}return!m||m.requested&&m.requested===m.total||!m.requested&&p.length===m.total?jk.DONE:jk.PENDING};eo.prototype.Ga=function(a,b,c){for(var d=this.a,e=d.length,f,g,h;e--;)if(f=d[e],g=f.oh,g.Mf(a,b))if(f=f.Go,h)h.push(f);else if(h=[f],c)break;return h||ff};eo.prototype.ce=function(){return\"2d\"};eo.prototype.s=function(){this.a=null;eo.l.s.call(this)};var fo={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:ul.ZOOM,COORD:ul.COORD},capture:!0};t(\"H.map.render.p2d.capabilities\",fo);function go(a,b){this.a=[];go.l.constructor.apply(this,arguments)}u(go,om);n=go.prototype;n.Oj=function(){return this.gb.Kc.apply(this.gb,arguments)};n.T=function(a,b,c,d,e,f,g){this.a=[];return go.l.T.apply(this,arguments)};n.xk=1;n.bl=function(a,b,c,d,e,f){var g=this.xk=d.$a();e*=g;f*=g;var h=c.Bb();b=h.w*g;h=h.h*g;var k=c.qd();this.vc?(e-=k.x*g,f-=k.y*g):(e=xd(e-k.x*g),f=xd(f-k.y*g));d.$c(c.bd(),e,f,b,h);a.detail?a.detail.set(e,f,e+b,f+h):a.detail=new lk(e,f,e+b,f+h);this.a.push(a)};\nn.Ga=function(a,b,c){for(var d=this.a,e=d.length,f,g,h,k=ff,l=this.xk;e--&&!(f=d[e],g=f.detail,g.Mf(a,b)&&(f=f.Hk,(!(h=f.Ab().g)||h.hg((a-g.left)/l,(b-g.top)/l,0))&&0>k.indexOf(f)&&(k===ff&&(k=[]),k.push(f),c))););return k};n.ce=function(){return\"2d\"};n.s=function(){this.a=null;go.l.s.call(this)};function U(a,b,c,d){U.l.constructor.call(this,a,b,c,d);this.S=new I(0,0);if(c=d.renderBaseBackground)this.lo=c.lower,this.eo=c.higher;this.co=!!d.enableSubpixelRendering;this.Jd=ho;this.Pj=0;this.Ie=this.Nj=!1;this.i=new Wl;this.a=d=new dm;this.Ld=A(this.Ld,this);d.addEventListener(d.g.Sg,this.Ld);this.Fa=A(this.Fa,this);d=a.element;this.Ja=a=d.ownerDocument.createElement(\"div\");a.style.position=\"absolute\";a.style.width=a.style.height=\"100%\";a.style.zIndex=0;d.insertBefore(a,d.firstChild);this.ek=\nnew Am(this.Ja,this.pa);this.m=[];io(this);this.ei=A(U.prototype.ei,this);this.A=jo;this.Dg();this.zoom=ko(this,this.G.ub()+this.hb);this.Ib();lo(this,b.lb().position,this.zoom);this.bb();this.U()}u(U,ql);t(\"H.map.render.p2d.RenderEngine\",U);U.prototype.type=Al.P2D;U.prototype.type=U.prototype.type;var jo=2;U.prototype.getState=function(){return this.A};U.prototype.getState=U.prototype.getState;function mo(a,b,c){b=c-b;return Ad(b)<a.oa.w/2?b:b-a.oa.w*c/Ad(c)}\nU.prototype.eh=function(a){var b=this,c=a.b,d=a.newValue,e=a.modifiers;a=d.position;var f=d.bounds,g,h=this.zoom,k=this.o,l=0;e&Ri.POSITION&&(g=b.oa.jb(a));if(e&Ri.BOUNDS)d=no(this,f.J(),e&Ri.ZOOM?d.zoom:B,e&Ri.POSITION?a:B),this.G.Yb(d,c);else{e&Ri.POSITION||(g=b.oa.jb(d.position));var m=g.x;var p=g.y;oo(this);this.S.set(0,0);d=po(this,d);var q=d.zoom;var r=d.position;if(c){var v=q-h;var w={x:k.x,y:k.y};c=this.oa.ke(w).x;var z=this.oa.projection.ad(a);if(z.x!==this.o.x||z.y!==this.o.y||q!==this.zoom)m=\nmo(this,c,m),qo(this,function(J){var G=J-l;if(q!==h){g=b.oa.ke(z);var W=b.oa.ke(w);m=mo(b,W.x,g.x);p=g.y-W.y}l=J;ro(b,m*G,p*G);h+=v*G;so(b,h);b.bb();b.fa()},this.ac,function(){lo(b,r,q);so(b,q);b.bb(r);b.fa()},this.bc)}else to(this),lo(this,r,q),so(this,q),this.bb(r);this.fa()}};U.prototype.ac=300;U.prototype.Gg=function(a){var b=Cc(a);if(!b||b&&0>a)throw new D(this.Gg,1,\"positive number required\");this.ac=a};U.prototype.setAnimationDuration=U.prototype.Gg;U.prototype.uh=function(){return this.ac};\nU.prototype.getAnimationDuration=U.prototype.uh;U.prototype.bc=Nl;U.prototype.Hg=function(a){if(!Ca(a))throw new D(this.Hg,1,\"function required\");this.bc=a};U.prototype.setAnimationEase=U.prototype.Hg;U.prototype.vh=function(){return this.bc};U.prototype.getAnimationEase=U.prototype.vh;U.prototype.Dg=function(){this.bc=Nl;this.ac=300};U.prototype.resetAnimationDefaults=U.prototype.Dg;\nU.prototype.si=function(a,b,c){var d;this.Da=zk();(d=this.ea.ha.splice(a,1)[0])&&d.B&&d.B();(d=this.u.ha.splice(a,1)[0])&&d.B&&d.B();(d=this.ra.ha.splice(a,1)[0])&&d.B&&d.B();(d=this.Y.ha.splice(a,1)[0])&&d.B&&d.B();this.f=this.c.Ma();0===a&&(vl(this,b,!1),this.Ib());this.m=Bm(this.ek,uo(this),vo(this));this.ne();c||this.fa()};function io(a){var b=a.c.Ma(),c=0,d=b.length;[a.ea={},a.u={},a.ra={},a.Y={}].forEach(function(e){e.Zc=[];e.ha=[]});for(a.f=a.c.Ma();c<d;c++)a.ef(c,b[c]);a.Ib()}\nU.prototype.ti=function(){this.Ib();this.fa()};U.prototype.Oh=function(a,b,c){var d,e,f,g;if(b){var h={vc:this.co,hb:this.hb};b.T?C(b,mm)?e=new lm(b):C(b,ym)&&(g=new lm(b)):(b.requestOverlays&&(d=new eo(b,h)),b.requestTiles&&(e=new bo(b,h)),b.requestMarkers&&(f=new go(b,h)),b.requestDomMarkers&&(g=new rm(b,h)))}c=c||0;this.ea.ha.splice(a,c,d);this.u.ha.splice(a,c,e);this.ra.ha.splice(a,c,f);this.Y.ha.splice(a,c,g);this.f=this.c.Ma();this.m=Bm(this.ek,uo(this),vo(this))};\nfunction vo(a){var b=[];b=b.concat(a.u.ha);b=b.concat(a.ea.ha);b=b.concat(a.ra.ha);b=b.concat(a.Y.ha);return b=b.filter(tc)}function po(a,b){var c=wl(a,wl(a,b.zoom)+a.hb);a=xl(a,b);a.zoom=c;return a}function lo(a,b,c){var d=a.oa;d.Pa(c);a.o=d.projection.ad(b);d.x=d.w*a.o.x;d.y=d.h*a.o.y}U.prototype.Xa=function(a,b){var c=this.g.center,d=this.pa;return this.oa.Ra((a-c.x)*d,(b-c.y)*d)};U.prototype.screenToGeo=U.prototype.Xa;U.prototype.Fg=function(a,b){a=this.Xa(a,b);b=this.G.lb();b.position=a;return b};\nU.prototype.Fa=function(a){var b=this.pa,c=this.g.center,d=c.x*b;c=c.y*b;a=this.oa.jb(a);var e=this.oa.w;return new I(xd((a.x-xd(a.x/e)*e+d)/b),xd((a.y+c)/b))};U.prototype.geoToScreen=U.prototype.Fa;U.prototype.J=function(a,b){var c=this.Gb[a||4];a=this.oa;var d=c.left-b,e=a.Ra(d,c.top-b),f=c.right+b;b=a.Ra(f,c.bottom+b);f-d>=a.w&&(e.lng=-(b.lng=180));return dg(e,b)};\nU.prototype.Ga=function(a,b,c,d){var e=[],f=this.pa,g;a*=f;b*=f;f=[this.ea,this.u,this.ra,this.Y];for(g=f.length;g--&&(!c||!e.length);){for(var h=e,k=f[g].ha,l=a,m=b,p=c,q=k.length;q--&&!((e=k[q])&&e.Ga&&(h=h.concat(e.Ga(l,m,p)),h.length&&p)););e=h}d(e)};U.prototype.getObjectsAt=U.prototype.Ga;U.prototype.Vc=y;function uo(a){a=a.Gb[2];return{w:a.right-a.left,h:a.bottom-a.top}}\nU.prototype.U=function(){var a=this.m.length,b;U.l.U.call(this);var c=uo(this);this.S.set(0,0);var d=c.w;for(b=c.h;a--;){c=this.m[a];var e=c.Bb();e.w===d&&e.h===b||c.vf(d,b)}this.Vc=new Ji(d,b);this.fa()};U.prototype.getCapabilities=function(){return fo};U.prototype.getCapabilities=U.prototype.getCapabilities;function wo(a){a.b&&a.b.ua()||zk()-a.Da<a.Jd&&!a.v?a.Sd=Jk(a.ei):(a.v&&(a.ne(),xo(a)),a.A=jo)}n=U.prototype;\nn.ne=function(){this.ea.Zc.length=0;this.u.Zc.length=0;this.ra.Zc.length=0;this.Y.Zc.length=0};\nn.ei=function(){var a;this.F&&this.F.before();var b=this.u.ha;var c=this.g.center.clone().scale(this.pa).round();var d=this.J(1,0);var e=this.J(1,yo);var f=this.zoom;var g=f-this.hb;var h=this.oa;var k=this.lo;var l=this.eo;var m=b[0];b=this.S;var p=this.m.length;var q=this.f;for(a=q.length;p--;){var r=this.m[p];C(r,jm)&&r.clear()}if(m){if(k)for(;k;)p=f-k,m.T(d,c,h,p,!0,b),--k;if(l&&this.Ie)for(r=1;r<=l&&(p=f+r,h.Pa(p),k=this.J(2,0),h.Pa(f),!m.T(k,c,h,p,!0,b));r++);}for(this.Jd=ho;a--;)h=q[a],C(h,\n$i)&&h.na()&&h.na().wg(e,g);d=this.wk(d,c,f,!1,b,zo,this.u,this.ea);c=this.wk(e,c,g,!1,b,Ao,this.ra,this.Y);this.v=d&&c;this.b&&this.b.ua()&&this.Tg();this.L||(this.L=this.G.lb());this.L.bounds=this.J(4,0);this.G.bb(this.L);this.L=null;this.Vc&&(this.g.bb(this.Vc),this.Vc=y);f<this.Pj?this.Ie=!0:this.Nj&&(this.Ie=!1);this.Pj=f;this.Nj=d;this.F&&this.F.after();wo(this)};\nn.wk=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments,6),k=h.length,l=h[0].ha.length,m=k*l,p=!!m,q;for(q=0;q<m;q++){if(f===zo){var r=q%k;var v=Math.floor(q/k)}else r=Math.floor(q/l),v=q%l;var w=h[r].ha[v];r=h[r].Zc;w&&(w=w.T(a,b,this.oa,c,d,e,this.Fa),w===jk.ACTIVE&&(this.Jd=Infinity),w!==jk.DONE||r[v]||(xo(this,this.f[v]),r[v]=!0),r[v]||(p=!1))}return p};function xo(a,b){a.dispatchEvent({type:a.uk.sj,target:b||a})}\nn.s=function(){var a=this.c.Ma()[0],b=this.g;Kk(this.Sd);to(this,!0);a&&vl(this,a,!1);vo(this).forEach(function(c){c.B()});b.element&&b.element.removeChild(this.Ja);this.Ja=null;this.A=3;U.l.s.call(this)};n.fa=function(){this.Da=zk();this.A===jo&&(this.v=!1,this.A=1,wo(this))};function Bo(a,b,c){ro(a,b*a.pa,c*a.pa);a.S.set(0,0);a.bb();a.fa()}function ro(a,b,c){var d=a.oa;a=a.o;d.x=Wd(d.x+b,d.w);d.y=wd(0,vd(d.w,d.y+c));a.x=d.x/d.w;a.y=d.y/d.h}\nn.ve=function(a,b,c){a=wl(this,wl(this,a)+this.hb);so(this,a,b,c)};U.prototype.zoomAt=U.prototype.ve;function so(a,b,c,d){var e=a.pa,f=a.g.center;c===+c&&d===+d?(c=(c-f.x)*e,d=(d-f.y)*e,a.S.set(c,d),ro(a,c,d),a.oa.Pa(b),ro(a,-c,-d)):(a.S.set(0,0),a.oa.Pa(b));a.zoom=b;a.bb();a.fa()}\nfunction no(a,b,c,d){var e=a.getCapabilities().lookAt.zoom.max,f=b.kb(),g=d||f;if(b.jg()||c&&d)c=c===B?e:c;else{var h=new Xi(a.oa.projection);h.Pa(e);var k=h.jb(b.Pb()).round();var l=h.jb(b.Mb()).round();e=h.w;b.Eb()&&(k.x-=e);d?(f=h.jb(g),b=2*wd(f.x-k.x,l.x-f.x),k=2*wd(f.y-k.y,l.y-f.y)):(b=l.x-k.x,k=l.y-k.y,g=f);c===B&&(f=a.Gb[4],c=f.right-f.left,f=f.bottom-f.top,c=-8+vd(Bd(c/b*e)/Ld,Bd(f/k*e)/Ld)-a.hb,c=wl(a,c))}return{zoom:yd(c),position:g}}\nfunction oo(a){to(a,!0);a.a.ua()&&a.yb(!0);a.i.ua()&&a.zb(!0);to(a,!0)}U.prototype.sc=function(a,b){oo(this);Co(this,b);this.i.start(a,!!b)};U.prototype.startInteraction=U.prototype.sc;function Co(a,b){if(b){var c={};c.jf=b.power;c.Je=b.ease;c.duration=b.duration;a.j=c}}function ko(a,b){return wl(a,wl(a,b-a.hb)+a.hb)}\nU.prototype.jc=function(a,b,c,d,e){var f=!1;this.i.ua()&&(b=this.i.store(a,b,c,d,e),this.i.Gc(ul.COORD)&&(a=this.i.Zd(),0<Vl(a)&&(Bo(this,-a.x,-a.y),f=!0)),b&&this.i.Gc(ul.ZOOM)&&(a=this.i.Tf(),b=this.i.Uf(),b=Bd(Dd(2,this.zoom)*b)/Ld,b!==this.zoom&&(b=ko(this,b),so(this,b,a.x,a.y),f=!0)),f&&this.fa())};U.prototype.interaction=U.prototype.jc;\nU.prototype.zb=function(a){var b=this;if(this.i.ua()&&!a){if(this.j){a=this.i.Cb();var c=this.i.xc();var d=this.j.duration;var e=(this.j.jf||1)*a;var f=new zm(-e/(0<d?d:1),e);!E(c.x)&&!E(c.y)&&0<e&&b.i.Gc(ul.COORD)&&qo(this,function(g){e=f.Re(g*d);E(e)||Bo(b,xd(-c.x*e),xd(-c.y*e))},d,void 0,this.j.Je)}this.j=null;this.i.clear()}};U.prototype.endInteraction=U.prototype.zb;U.prototype.rc=function(a,b,c){oo(this);this.a.start(b,c);Co(this,a)};U.prototype.startControl=U.prototype.rc;\nU.prototype.control=function(a,b,c){if(E(+c))throw new D(this.control,2,c);if(E(a))throw new D(this.control,0,a);if(E(b))throw new D(this.control,1,b);this.a.ua()&&this.a.set(a,b,c,0,0,0)};U.prototype.control=U.prototype.control;\nU.prototype.yb=function(a,b){var c=this,d;if(this.a.ua()){to(this,!0);var e=zk();var f=e-this.va;if(1<=f){var g=gm(this.a);Do(this,g,f)}if(!this.j||a||b)\"function\"===typeof b&&(a=this.lb(),a.zoom=this.zoom-this.hb,b(a),a.zoom+=this.hb,Eo(this,a));else{b=this.a.Cb();var h=this.a.xc();var k=this.j.duration;var l=(this.j.jf||1)*b;var m=new zm(-l/(0<k?k:1),l);!E(h.mb)&&!E(h.nb)&&0<l&&qo(this,function(p,q,r,v){e&&(r=v-e,e=0);l=m.Re(p*k)*r;E(l)||((d=h.ob*l)&&so(c,ko(c,c.zoom+d),c.a.b,c.a.c),Bo(c,xd(h.mb*\nl),xd(h.nb*l)))},k,void 0,this.j.Je)}this.a.reset()}};U.prototype.endControl=U.prototype.yb;\nfunction Eo(a,b){var c=a.o,d=a.oa.projection.ad(b.position),e=a.oa.ke(d),f=e.y;e=e.x;var g=b.zoom;c=a.oa.ke(c);b=c.y;var h=c.x;c=a.zoom;var k=a.a.Cb(),l=a.a.b,m=a.a.c,p=0;e=mo(a,h,e);e-=h;f-=b;c=g-c;b=Cd(e*e+f*f+c*c);if(0!==k&&0!==b){var q=e/b;var r=f/b;var v=c/b;var w=k*k/(2*b);qo(a,function(z,J){var G;if(1!==z){z=k*J-w*J*J/2;J=z-p;if(G=v*J)G=ko(a,a.zoom+G),so(a,ko(a,G),l,m);Bo(a,xd(q*J),xd(r*J));p=z}else a.o=d,so(a,ko(a,g),l,m),a.bb(),a.fa()},2*b/k)}}\nU.prototype.Ld=function(a){var b=this,c=a.c;this.S.set(0,0);c.mb||c.nb||c.ob?(this.va=zk(),qo(this,function(d,e,f,g){b.va=g;Do(b,c,f)},Number.POSITIVE_INFINITY),this.fa()):to(this,!0)};function Do(a,b,c){c=c||0;b.ob&&so(a,ko(a,a.zoom+b.ob*c),a.a.atX,a.a.atY);Bo(a,b.mb*c,b.nb*c)}function qo(a,b,c,d,e){a.b&&a.b.ua()&&a.b.stop(!0);a.b=new nm(a,b,c,d,e);a.b.start()}function to(a,b){a.b&&a.b.ua()&&a.b.stop(b)}U.prototype.ph=function(){};U.prototype.enter=U.prototype.ph;\nU.prototype.Sf=function(a){tl(this.Ja,a)};U.prototype.exit=U.prototype.Sf;U.prototype.capture=function(a,b,c,d){var e=this.Ja.ownerDocument.createElement(\"canvas\"),f=e.getContext(\"2d\"),g=this.pa;e.width=(c-a)*g;e.height=(d-b)*g;for(c=0;c<this.m.length;c++)d=this.m[c],C(d,jm)&&f.drawImage(d.N(),-a*g,-b*g);return Xb(e)};var Ao=0,zo=1,ho=1E3,yo=256;\n");